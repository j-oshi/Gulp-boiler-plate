"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}!function(){var e={globals:{stylesheet:"css/multislider.css",slideContainer:"main-slide-container",slideOffset:0,modelScroller:0,carousel:!0,carouselTransitionTime:2e3,timer:null},init:function(){e.loadStyleSheet(),e.loadFixScript(),e.displayProduct(),e.scrollToLeft(),e.scrollToRight(),e.slideModalLeft(),e.slideModalRight(),e.carouselEvent(),e.onCarouselHover()},loadStyleSheet:function(){if(_toConsumableArray(document.querySelectorAll("link")).map((function(e){return e.href.includes("")})).filter((function(e){return!0===e})).length<1){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e.globals.stylesheet,document.getElementsByTagName("head")[0].appendChild(t)}},loadFixScript:function(){if(void 0===document.getElementById(e.globals.slideContainer).scrollLeftMax){var t=document.createElement("script");t.setAttribute("src","js/iefix.js"),document.getElementsByTagName("head")[0].appendChild(t)}},setScrollOffset:function(t){e.globals.slideOffset+=t},getScrollOffset:function(){return e.globals.slideOffset},resetScrollOffset:function(){e.globals.slideOffset=0},slideDisplay:function(t){var n=document.getElementById(e.globals.slideContainer),o=n.scrollWidth/Array.from(n.children).length;-1===t&&n.scrollLeft<n.scrollLeftMax&&(e.setScrollOffset(o),n.scrollLeft=e.getScrollOffset()),1===t&&0!==n.scrollLeft&&(e.setScrollOffset(-o),n.scrollLeft=e.getScrollOffset())},scrollToLeft:function(){document.getElementById("button-left").addEventListener("click",(function(){e.slideDisplay(1)}))},scrollToRight:function(){document.getElementById("button-right").addEventListener("click",(function(){e.slideDisplay(-1)}))},carouselEvent:function(){if(e.globals.carousel){var t=document.getElementById(e.globals.slideContainer);e.globals.timer=setInterval((function(){e.slideDisplay(-1),t.scrollLeft>=t.scrollLeftMax&&(e.resetScrollOffset(),t.scrollLeft=0)}),e.globals.carouselTransitionTime)}},onCarouselHover:function(){_toConsumableArray(document.querySelectorAll(".arrow")).forEach((function(t){t.addEventListener("mouseover",(function(){clearInterval(e.globals.timer)})),t.addEventListener("mouseout",(function(){e.carouselEvent()}))}))},loadProductJSON:function(e,t){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.onreadystatechange=function(){4==n.readyState&&"200"==n.status?e(n.responseText):e(!1)},n.open("GET",t,!0),n.send(null)},displayProduct:function(){e.loadProductJSON((function(t){if(!1!==t){var n=JSON.parse(t);e.displayCard(n)}}),"data/recommendations.json")},displayCard:function(t){var n=document.getElementById(e.globals.slideContainer),o=t.hits.map((function(e){if(void 0!==e.image)return'<div class="card">\n                    <img src="'.concat(e.image.link,'" alt="').concat(e.image.alt,'" style="width:100%">\n                    <div class="container">\n                        <h6>').concat(e.product_name,'</h6> \n                        <p class="popUp" data-id="').concat(e.product_id,'" >£').concat(e.price,"</p> \n                    </div>\n                </div>")}));n.insertAdjacentHTML("afterbegin",o.join("")),e.slideDisplay(e.globals.slideIndex),e.modalControl()},setModalValue:function(t){e.globals.modelScroller+=t},getModalValue:function(){return e.globals.modelScroller},modalControl:function(){var t=document.getElementById("myModal");Array.from(document.getElementsByClassName("popUp")).map((function(n){n.addEventListener("click",(function(){t.style.display="block",e.displayModalProduct(this.dataset.id)}))})),document.getElementsByClassName("close")[0].onclick=function(){t.style.display="none"},window.onclick=function(e){e.target==t&&(t.style.display="none")}},displayModalProduct:function(t){var n=t.substring(0,6);document.querySelectorAll(".slide, .slide-button, .slide-title").forEach((function(e){return e.remove()}));var o=document.getElementById("slider"),l=document.getElementById("slider-controller");e.loadProductJSON((function(e){if(!1!==e){var t=JSON.parse(e),r=t.data.map((function(e){if(n===e.id)return e})).filter((function(e){return void 0!==e})),a=[],i=[],s=[];r[0].image_groups.map((function(e){return e.images.map((function(e){return s.push(e)}))})),s.map((function(e,t){a.push('<div class="slide" id="slide-'.concat(t,'"><img src="').concat(e.link,'" alt="').concat(e.alt,'" style="width:100%"></div>')),i.push('<a class="slide-button" href="#slide-'.concat(t,'">').concat(t,"</a>"))})),o.insertAdjacentHTML("afterbegin",a.join("")),l.insertAdjacentHTML("afterbegin",i.join("")),l.insertAdjacentHTML("afterbegin",'<h6 class="slide-title">'.concat(t.data[0].name,'</h6><p class="slide-title">£').concat(t.data[0].price,"</p>"))}}),"data/product.json")},slideModal:function(t){var n=Array.from(document.getElementsByClassName("slide-button")),o=Array.from(n).length-1;if(1===t){e.setModalValue(1);var l=e.getModalValue();o>=l&&(window.location.href=n[l].href)}if(-1===t&&e.getModalValue()>0){e.setModalValue(-1);var r=e.getModalValue();o>=r&&r>=0&&(window.location.href=n[r].href)}},slideModalLeft:function(){document.getElementById("modal-button-left").addEventListener("click",(function(){e.slideModal(-1)}))},slideModalRight:function(){document.getElementById("modal-button-right").addEventListener("click",(function(){e.slideModal(1)}))}};e.init()}();